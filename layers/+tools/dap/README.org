#+TITLE: DAP layer

* Table of Contents                      :TOC_4_gh:noexport:
- [[#description][Description]]
  - [[#features][Features:]]
- [[#configuration][Configuration]]
  - [[#derived-layers][Derived layers]]
    - [[#declared-prefixes][Declared prefixes]]
    - [[#default-keybindings][Default keybindings]]
- [[#references][References]]

* Description
  Experimental integrated visual debugger using [[https://code.visualstudio.com/docs/extensionAPI/api-debugging][Debug Adapter Protocol]].

  [[https://code.visualstudio.com/docs/extensionAPI/api-debugging][Debug Adapter Protocol]] is a wire protocol for communication between client and
  Debug Server. It similar to the [[https://github.com/Microsoft/language-server-protocol][LSP]] but providers integration with debug
  server.

** Features:
   Fully featured IDE-like debugger providing:
   - Launch/Attach
   - Breakpoints
   - Exceptions
   - Pause & Continue
   - Step In/Out/Over
   - Callstacks
   - Threads
   - Multiple simultaneous debug sessions
   - Evaluating statements
   - Debug/Run configurations
   - Debug REPL
* Configuration
** Derived layers
   Derived layer should provide information how to configure the language
   specific debug adapter and the language specific bindings(e. g. debug
   application, debug test, etc). The package declares function
   ~spacemacs/dap-bind-keys-for-mode~ which should be used by the derived layers
   to configure the shortcuts.
*** Declared prefixes
    The following prefixes have been declared:

    | prefix  | name              |
    |---------+-------------------|
    | ~m d~   | debug             |
    | ~m d d~ | launching         |
    | ~m d b~ | breakpoints       |
    | ~m d l~ | debug windows     |
    | ~m d S~ | context switching |
    | ~m d e~ | eval              |
    | ~m d I~ | inspect           |

*** Default keybindings
    The default bindings are listed below. Derived layers should extend this list:

    | Key Binding | Description                     |
    |-------------+---------------------------------|
    | ~m d d d~   | start debugging                 |
    | ~m d d l~   | debug last configuration        |
    | ~m d d r~   | debug recent configuration      |
    |-------------+---------------------------------|
    | ~m d c~     | continue                        |
    | ~m d i~     | step in                         |
    | ~m d o~     | step out                        |
    | ~m d s~     | next step                       |
    | ~m d v~     | inspect value at point          |
    | ~m d r~     | restart frame                   |
    |-------------+---------------------------------|
    | ~m d .~     | debug transient state           |
    |-------------+---------------------------------|
    | ~m d a~     | abandon current session         |
    | ~m d A~     | abandon all process             |
    |-------------+---------------------------------|
    | ~m d e e~   | eval                            |
    | ~m d e r~   | eval region                     |
    | ~m d e t~   | eval value at point             |
    |-------------+---------------------------------|
    | ~m d S s~   | switch session                  |
    | ~m d S t~   | switch thread                   |
    | ~m d S f~   | switch frame                    |
    |-------------+---------------------------------|
    | ~m d I i~   | inspect                         |
    | ~m d I r~   | inspect region                  |
    | ~m d I t~   | inspect value at point          |
    |-------------+---------------------------------|
    | ~m d b b~   | toggle a breakpoint             |
    | ~m d b c~   | change breakpoint condition     |
    | ~m d b l~   | change breakpoint log condition |
    | ~m d b h~   | change breakpoint hit count     |
    | ~m d b a~   | add a breakpoint                |
    | ~m d b d~   | delete a breakpoint             |
    | ~m d B~     | clear all breakpoints           |
    |-------------+---------------------------------|
    | ~m d '~     | Run debug REPL                  |
    |-------------+---------------------------------|
    | ~m d l l~   | list local variables            |
    | ~m d l o~   | goto output buffer if present   |
    | ~m d l s~   | list sessions                   |
    | ~m d l b~   | list breakpoints                |

* References
  - [[https://github.com/yyoncho/dap-mode][dap-mode repo]]
  - [[https://github.com/emacs-lsp/lsp-mode][lsp-mode repo]]
